(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{m:()=>Y});const t=(e,t,r,a,n)=>({title:e,description:t,dueDate:a,priority:r,checklist:n,taskId:0}),r=e=>({projectTaskArray:[],title:e,projectId:Y.length});function a(){localStorage.setItem("projects",JSON.stringify(Y))}const n=document.querySelector("#close-add-task-modal"),i=document.querySelector(".confirm-add-form"),s=document.querySelector(".modal"),c=document.querySelector(".modal-create-new-task"),d=document.querySelector("#form-input-task-title"),l=document.querySelector(".form-title-error"),o=document.querySelector(".form-add-description"),u=document.querySelector("#form-add-dueDate"),p=document.querySelector(".form-add-priority"),m=document.querySelector("#close-edit-task-modal"),v=document.querySelector(".confirm-edit-form"),E=document.querySelector(".modal-edit-task"),h=document.querySelector("#form-edit-input-task-title"),k=document.querySelector(".form-edit-title-error"),y=document.querySelector(".form-edit-description"),g=document.querySelector("#form-edit-dueDate"),f=document.querySelector(".form-edit-priority"),L=document.querySelector(".modal-show-task"),b=document.querySelector("#close-task-modal-show"),T=document.querySelector(".modal-content-title"),A=document.querySelector(".modal-content-description"),j=document.querySelector(".modal-content-due-date"),S=document.querySelector(".modal-content-priority"),C=document.querySelector(".modal-content-task-finished");function q(){d.value="",o.value="",u.value="",l.classList.add("hide"),s.classList.add("hide"),c.classList.add("hide"),d.classList.remove("form-title-error-input")}function x(){h.value="",y.value="",g.value="",k.classList.add("hide"),s.classList.add("hide"),E.classList.add("hide"),h.classList.remove("form-title-error-input")}const w=document.querySelector(".task-cards");function D(e,t,r,n,i,c){const l=document.createElement("div");l.classList.add("task-card"),l.setAttribute("dataset",`${c}`);const o=document.createElement("div");o.classList.add("checklist-priority-div");const u=document.createElement("input");u.classList.add("task-checklist"),u.setAttribute("type","checkbox"),u.setAttribute("id",`checkbox-${c}`),!0===i&&u.setAttribute("checked","true");const p=document.createElement("div");p.classList.add("task-title"),p.innerText=`${e}`;const q=document.createElement("div");q.classList.add("task-description"),q.innerText=`${t}`;const D=document.createElement("div");"low"===r?D.classList.add("task-priority-low"):"mid"===r?D.classList.add("task-priority-mid"):D.classList.add("task-priority-high");const $=document.createElement("div");$.classList.add("task-due-date"),$.innerText=`${n}`;const I=document.createElement("div");I.classList.add("edit-delete-div");const O=document.createElement("button");O.classList.add("task-edit");const N=document.createElement("img");N.setAttribute("draggable","false"),N.setAttribute("src","../src/svg/pencil-white.svg");const W=document.createElement("button");W.classList.add("task-delete");const J=document.createElement("img");J.setAttribute("draggable","false"),J.setAttribute("src","../src/svg/trash-can-outline-white.svg"),w.appendChild(l),l.appendChild(o),o.appendChild(u),o.appendChild(D),l.appendChild(p),l.appendChild(q),l.appendChild($),l.appendChild(I),I.appendChild(O),O.appendChild(N),I.appendChild(W),W.appendChild(J),u.addEventListener("click",(e=>{e.stopPropagation(),!1===Y[e.target.parentElement.parentElement.parentElement.attributes[1].value].projectTaskArray[e.target.parentElement.parentElement.attributes[1].value].checklist?(Y[e.target.parentElement.parentElement.parentElement.attributes[1].value].projectTaskArray[e.target.parentElement.parentElement.attributes[1].value].checklist=!0,a()):(Y[e.target.parentElement.parentElement.parentElement.attributes[1].value].projectTaskArray[e.target.parentElement.parentElement.attributes[1].value].checklist=!1,a())})),W.addEventListener("click",(e=>{e.stopPropagation(),Y[e.target.parentElement.parentElement.parentElement.parentElement.attributes[1].value].projectTaskArray.splice(e.currentTarget.parentElement.parentElement.attributes[1].value,1),P(e.target.parentElement.parentElement.parentElement.parentElement.attributes[1].value),a()})),O.addEventListener("click",(e=>{var t,r;e.stopPropagation(),t=e.target.parentElement.parentElement.parentElement.parentElement.attributes[1].value,r=e.target.parentElement.parentElement.parentElement.attributes[1].value,s.classList.remove("hide"),E.classList.remove("hide"),h.value=Y[t].projectTaskArray[r].title,y.value=Y[t].projectTaskArray[r].description,g.value=Y[t].projectTaskArray[r].dueDate,f.value=Y[t].projectTaskArray[r].priority,E.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()})),v.addEventListener("click",(e=>{if(e.preventDefault(),""===h.value||null===d.value)return k.classList.remove("hide"),void h.classList.add("form-title-error-input");Y[t].projectTaskArray[r].title=h.value,Y[t].projectTaskArray[r].description=y.value,Y[t].projectTaskArray[r].dueDate=g.value,Y[t].projectTaskArray[r].priority=f.value,P(t),x(),a()})),m.addEventListener("click",(()=>{x()})),s.addEventListener("click",(e=>{x()}))})),l.addEventListener("click",(e=>{var t,r;t=w.attributes[1].value,r=e.currentTarget.attributes[1].value,s.classList.remove("hide"),L.classList.remove("hide"),T.innerText=`${Y[t].projectTaskArray[r].title}`,A.innerText=`${Y[t].projectTaskArray[r].description}`,""!==Y[t].projectTaskArray[r].dueDate?j.innerText=`${Y[t].projectTaskArray[r].dueDate}`:j.innerText="No due date",S.innerText=`${Y[t].projectTaskArray[r].priority}`,Y[t].projectTaskArray[r].checklist?C.innerText="Task finished: YES":C.innerText="Task finished: NO",b.addEventListener("click",(()=>{T.innerText="",A.innerText="",j.innerText="",S.innerText="",s.classList.add("hide"),L.classList.add("hide")})),s.addEventListener("click",(e=>{x()})),L.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}))}))}function $(){const e=document.createElement("button");e.classList.add("project-add-btn");const r=document.createElement("img");r.setAttribute("src","../src/svg/plus-box-outline-white.svg"),w.appendChild(e),e.appendChild(r),e.addEventListener("click",(()=>{s.classList.remove("hide"),c.classList.remove("hide"),c.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()})),i.addEventListener("click",(e=>{if(e.preventDefault(),""===d.value||null===d.value)return l.classList.remove("hide"),void d.classList.add("form-title-error-input");Y[e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.children[1].children[1].children[0].attributes[1].value].projectTaskArray.push(t(d.value,o.value,p.value,u.value,!1)),P(e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.children[1].children[1].children[0].attributes[1].value),q(),a()})),n.addEventListener("click",(()=>{q()})),s.addEventListener("click",(e=>{q()})),u.addEventListener("click",(e=>{e.stopPropagation()}))}))}function P(e){if(I(),0===Y[e].projectTaskArray.length)return $(),void w.setAttribute("dataset",`${e}`);w.setAttribute("dataset",`${e}`);for(let t=0;t<Y[e].projectTaskArray.length;t++)if(Y[e].projectTaskArray[t].taskId=t,D(Y[e].projectTaskArray[t].title,Y[e].projectTaskArray[t].description,Y[e].projectTaskArray[t].priority,Y[e].projectTaskArray[t].dueDate,Y[e].projectTaskArray[t].checklist,Y[e].projectTaskArray[t].taskId),t===Y[e].projectTaskArray.length-1)return void $();$()}function I(){for(;w.firstChild;)w.removeChild(w.firstChild)}const O=document.querySelector(".project-cards");function N(e,t){const r=document.createElement("div");r.classList.add("project-card"),r.setAttribute("dataset",`${t}`);const n=document.createElement("div");n.classList.add("project-title"),n.innerText=`${e}`;const i=document.createElement("div");i.classList.add("edit-delete-div");const s=document.createElement("button");s.classList.add("project-edit");const c=document.createElement("img");c.setAttribute("draggable","false"),c.setAttribute("src","../src/svg/pencil-white.svg");const d=document.createElement("button");d.classList.add("project-delete");const l=document.createElement("img");if(l.setAttribute("draggable","false"),l.setAttribute("src","../src/svg/trash-can-outline-white.svg"),O.appendChild(r),r.appendChild(n),r.appendChild(i),i.appendChild(s),s.appendChild(c),i.appendChild(d),d.appendChild(l),""===e){const r=document.createElement("input");r.classList.add("edit-title-input"),r.setAttribute("type","text"),n.replaceWith(r),r.focus(),r.addEventListener("keydown",(i=>{if("Enter"===i.key||"Escape"===i.key){if(""===r.value)return;n.innerText=r.value,e=r.value,Y[t].title=r.value,r.replaceWith(n),a()}}))}r.addEventListener("click",(e=>{P(e.currentTarget.attributes[1].value)})),s.addEventListener("click",(()=>{const r=document.createElement("input");r.classList.add("edit-title-input"),r.setAttribute("type","text"),r.setAttribute("value",`${e}`),n.replaceWith(r),r.focus();const i=r.value.length;r.setSelectionRange(i,i),r.addEventListener("keydown",(i=>{if("Enter"===i.key||"Escape"===i.key){if(""===r.value)return;n.innerText=r.value,e=r.value,Y[t].title=r.value,r.replaceWith(n),a()}}))})),d.addEventListener("click",(e=>{e.stopPropagation(),Y.splice(e.target.parentElement.parentElement.parentElement.attributes[1].value,1),J(),I(),a()}))}function W(){const e=document.createElement("button");e.classList.add("project-add-btn");const t=document.createElement("img");t.setAttribute("src","../src/svg/plus-box-outline-white.svg"),O.appendChild(e),e.appendChild(t),e.addEventListener("click",(()=>{Y.push(r("")),J()}))}function J(){!function(){for(;R.firstChild;)R.removeChild(R.firstChild)}();for(let e=0;e<Y.length;e++)if(Y[e].projectId=e,N(Y[e].title,Y[e].projectId),e===Y.length-1)return void W();W()}const R=document.querySelector(".project-cards"),Y=[];window.addEventListener("load",(()=>{localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")).forEach((e=>{Y.push(e)})):(Y.push(r("Default")),Y[0].projectTaskArray.push(t("Title","Description","low","2023-04-21",!1))),a(),J(),P(0)}))})();